pipeline{
 agent any
		stages{
			             stage('Compile Stage'){
				 steps {
					 withMaven(maven : 'Maven'){
					 bat 'mvn clean compile'
				    }
				 
			      }
			  }
			  
			 stage('Testing Stage'){
				 steps {
					withMaven(maven : 'Maven'){
					   bat 'mvn test'
				    }
				 
			      }
			  }
			  
			  stage('Deployment Stage') {
				 steps {
					withMaven(maven : 'Maven'){
					 bat 'mvn deploy'
				    }
				 
			      }
			 }
			 
			 
		 
			stage('save log build') {
			    
			    steps {
			        
			        script {
			          // def logContent = Jenkins.getInstance().getItemByFullName(env.JOB_NAME).getBuildByNumber( Integer.parseInt(env.BUILD_NUMBER)).logFile.text
			            // copy the log in the job's own workspace
			            //writeFile file:"buildlog.txt", text: logContent
			        }//script
			        
			    }//step
			    
		   }//stage
		  
      }//stages 
   
   post {
        always {
            archiveArtifacts artifacts:"buildlog.txt ,target/surefire-reports/*"
           
        }
    }
    	  

 
    
}		  
