pipeline{
 agent any
		stages{
			stage('Compile Stage'){
				 steps {
					 withMaven(maven : 'Maven'){
					 bat 'mvn clean compile'
				    }
				 
			      }
			  }
			  
			 stage('Testing Stage'){
				 steps {
					withMaven(maven : 'Maven'){
					   bat 'mvn test'
				    }
				 
			      }
			  }
			  
			  stage('Deployment Stage') {
				 steps {
					withMaven(maven : 'Maven'){
					 bat 'mvn deploy'
				    }
				 
			      }
			 }
		 

         stage('save log build') {
				    steps {
						        script {
						        echo "111111111111111111111"
						        echo System.getenv('JOB_NAME')
						          echo "2222222222222222222222"
						          
						            def logContent = Jenkins.getInstance()
						                .getItemByFullName(System.getenv("JOB_NAME"))
						                .getBuildByNumber(Integer.parseInt(System.getenv("BUILD_NUMBER")))
						                .logFile.text
						            // copy the log in the job's own workspace
						            writeFile file: "buildlog.txt", text: logContent
						        }
				    }
			}
   }	  

 
    
}		  